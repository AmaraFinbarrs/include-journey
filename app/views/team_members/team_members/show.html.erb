<main class="container team-members team_member">
  <div class="row m-1 mt-3">
    <div class="col">
      <%= link_to team_members_path, class: 'btn btn-primary' do %>
        <i class="fas fa-arrow-circle-left"></i> Back to team members
      <% end %>
    </div>
  </div>
  <section class="row">
    <div class="col mb-3">
      <h3><%= @team_member.first_name %> <%= @team_member.last_name %> </h3>
      <div class="container buttons">
        <div class="row">
          <%= link_to '#info', class: 'col d-flex align-items-center btn' do %>
            <div class="container">
              <div class="row">
                <div class="col">
                  <i class="mb-1 fas fa-user"></i>
                </div>
              </div>
              <div class="row">
                <div class="col">Details</div>
              </div>
            </div>
          <% end %>
          <%= link_to '#wba-team-members', class: 'col d-flex align-items-center btn' do %>
            <div class="container">
              <div class="row">
                <div class="col">
                  <i class="mb-1 fas fa-clipboard"></i>
                </div>
              </div>
              <div class="row">
                <div class="col">Wellbeing Assessments</div>
              </div>
            </div>
          <% end %>
          <%= link_to wba_self_view_logs_team_member_path(@team_member, 1), class: 'col d-flex align-items-center btn' do %>
            <div class="container">
              <div class="row">
                <div class="col">
                  <i class="mb-1 fas fa-eye"></i>
                </div>
              </div>
              <div class="row">
                <div class="col">WBA View Logs</div>
              </div>
            </div>
          <% end %>
        </div>
        <div class="row">
          <a class="col clear d-flex align-items-center"></a>
          <a class="col clear d-flex align-items-center"></a>
          <%= link_to journal_entry_view_logs_team_member_path(@team_member, 1), class: 'col d-flex align-items-center btn' do %>
            <div class="container">
              <div class="row">
                <div class="col">
                  <i class="mb-1 fas fa-eye"></i>
                </div>
              </div>
              <div class="row">
                <div class="col">Journal Entries View Logs</div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </section>
  <section class="row" id="info">
    <div class="col mb-3">
      <h3>Details</h3>
      <div class="table-container">
        <table class="table table-dark table-striped">
          <thead>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Email</th>
            <th scope="col">Mobile No.</th>
            <th scope="col">Admin</th>
            <th scope="col">Created At</th>
            <th scope="col">Last Update</th>
          </thead>
          <tbody>
            <tr>
              <td><%= @team_member.first_name %></td>
              <td><%= @team_member.last_name %></td>
              <td><%= @team_member.email %></td>
              <td>0<%= @team_member.mobile_number %></td>
              <td>
                <% if @team_member.admin %>
                  <i class="fas fa-check-circle"></i>
                <% else %>
                  <i class="fas fa-times-circle"></i>
                <% end %>
              </td>
              <td><%= @team_member.created %></td>
              <td><%= @team_member.last_update %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
  <% if @team_member.sign_in_count > 0 %>
    <section class="row">
      <div class="col mb-3">
        <h3>Team Member Sign In</h3>
        <div class="table-container">
          <table class="table table-dark table-striped">
            <thead>
              <th scope="col">Sign In Count</th>
              <th scope="col">Current Sign In</th>
              <th scope="col">Current Sign In IP</th>
              <th scope="col">Last Sign In</th>
              <th scope="col">Last Sign In IP</th>
            </thead>
            <tbody>
              <tr>
                <td><%= @team_member.sign_in_count %></td>
                <td><%= @team_member.current_sign_in %></td>
                <td><%= @team_member.current_sign_in_ip %></td>
                <td><%= @team_member.last_sign_in %></td>
                <td><%= @team_member.last_sign_in_ip %></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  <% end %>
  <% if @team_member.wba_team_members.count > 0 %>
    <section class="row" id="wba-team-members">
      <div class="col">
        <h3>wellbeing assessments</h3>
        <div class="table-container">
          <table class="table table-dark table-striped">
            <thead>
              <th scope="col">User</th>
              <th scope="col">Created At</th>
              <th scope="col">Last Update</th>
            </thead>
            <tbody>
              <% @team_member.wba_team_members.order(:created_at).each do |wba_team_member| %>
                <tr>
                  <td>
                    <%= link_to user_path(wba_team_member.user) do %>
                      <%= wba_team_member.user.first_name %> <%= wba_team_member.user.last_name %>
                    <% end %>
                  </td>
                  <td>
                    <%= link_to wba_team_member_path(wba_team_member) do %>
                      <%= wba_team_member.created %>
                    <% end %>
                  </td>
                  <td>
                    <%= link_to wba_team_member_path(wba_team_member) do %>
                      <%= wba_team_member.last_update %>
                    <% end %>
                </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  <% end %>
</main>